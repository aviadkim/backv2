{
  "agent_name": "DocumentMergeAgent",
  "test_date": "2025-04-14T23:31:14.845057",
  "total_tests": 4,
  "passed_tests": 3,
  "failed_tests": 1,
  "test_results": [
    {
      "test_id": 1,
      "description": "Merge portfolio and balance sheet",
      "passed": true,
      "execution_time": 0.0,
      "input": "{'documents': [{'metadata': {'document_type': 'portfolio_statement', 'document_date': '2025-03-16T23:31:14.845057'}, 'tables': [{'type': 'portfolio', 'data': [{'Security': 'Apple Inc.', 'ISIN': 'US0378331005', 'Quantity': 100, 'Price': 150.25, 'Value': 15025.0}, {'Security': 'Microsoft Corp.', 'ISIN': 'US5949181045', 'Quantity': 50, 'Price': 300.5, 'Value': 15025.0}, {'Security': 'Amazon.com Inc.', 'ISIN': 'US0231351067', 'Quantity': 25, 'Price': 130.75, 'Value': 3268.75}]}], 'financial_data': {'portfolio': {'securities': [{'name': 'Apple Inc.', 'isin': 'US0378331005', 'quantity': 100, 'price': 150.25, 'value': 15025.0}, {'name': 'Microsoft Corp.', 'isin': 'US5949181045', 'quantity': 50, 'price': 300.5, 'value': 15025.0}, {'name': 'Amazon.com Inc.', 'isin': 'US0231351067', 'quantity': 25, 'price': 130.75, 'value': 3268.75}], 'summary': {'total_value': 33318.75, 'total_securities': 3}}}}, {'metadata': {'document_type': 'balance_sheet', 'document_date': '2025-03-29T23:31:14.845057'}, 'tables': [{'type': 'balance_sheet', 'data': [{'Item': 'Cash and Cash Equivalents', 'Amount': 50000.0}, {'Item': 'Investments', 'Amount': 150000.0}, {'Item': 'Real Estate', 'Amount': 500000.0}, {'Item': 'Total Assets', 'Amount': 700000.0}, {'Item': 'Credit Card Debt', 'Amount': 5000.0}, {'Item': 'Mortgage', 'Amount': 300000.0}, {'Item': 'Total Liabilities', 'Amount': 305000.0}, {'Item': 'Net Worth', 'Amount': 395000.0}]}], 'financial_data': {'balance_sheet': {'assets': {'cash': 50000.0, 'investments': 150000.0, 'real_estate': 500000.0}, 'liabilities': {'credit_card': 5000.0, 'mortgage': 300000.0}, 'equity': {'net_worth': 395000.0}, 'summary': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'total_equity': 395000.0}}}}]}",
      "expected": "{'document_types': ['portfolio_statement', 'balance_sheet']}",
      "actual": "{'merge_date': '2025-04-14T23:31:14.845057', 'original_documents': 2, 'document_types': ['portfolio_statement', 'balance_sheet'], 'merged_data': {'portfolio': {'securities': [{'name': 'Apple Inc.', 'isin': 'US0378331005', 'quantity': 100, 'price': 150.25, 'value': 15025.0}, {'name': 'Microsoft Corp.', 'isin': 'US5949181045', 'quantity': 50, 'price': 300.5, 'value': 15025.0}, {'name': 'Amazon.com Inc.', 'isin': 'US0231351067', 'quantity': 25, 'price': 130.75, 'value': 3268.75}], 'summary': {'total_value': 33318.75, 'total_securities': 3}}, 'balance_sheet': {'assets': {'cash': 50000.0, 'investments': 150000.0, 'real_estate': 500000.0}, 'liabilities': {'credit_card': 5000.0, 'mortgage': 300000.0}, 'equity': {'net_worth': 395000.0}, 'summary': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'total_equity': 395000.0}}}, 'summary': {'financial_health': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'total_equity': 395000.0}, 'asset_overview': {'total_portfolio_value': 33318.75, 'security_count': 3}, 'income_overview': {}, 'key_metrics': {'debt_to_assets': 0.4357142857142857, 'debt_to_equity': 0.7721518987341772}}}"
    },
    {
      "test_id": 2,
      "description": "Merge all document types",
      "passed": true,
      "execution_time": 0.0,
      "input": "{'documents': [{'metadata': {'document_type': 'portfolio_statement', 'document_date': '2025-03-16T23:31:14.845057'}, 'tables': [{'type': 'portfolio', 'data': [{'Security': 'Apple Inc.', 'ISIN': 'US0378331005', 'Quantity': 100, 'Price': 150.25, 'Value': 15025.0}, {'Security': 'Microsoft Corp.', 'ISIN': 'US5949181045', 'Quantity': 50, 'Price': 300.5, 'Value': 15025.0}, {'Security': 'Amazon.com Inc.', 'ISIN': 'US0231351067', 'Quantity': 25, 'Price': 130.75, 'Value': 3268.75}]}], 'financial_data': {'portfolio': {'securities': [{'name': 'Apple Inc.', 'isin': 'US0378331005', 'quantity': 100, 'price': 150.25, 'value': 15025.0}, {'name': 'Microsoft Corp.', 'isin': 'US5949181045', 'quantity': 50, 'price': 300.5, 'value': 15025.0}, {'name': 'Amazon.com Inc.', 'isin': 'US0231351067', 'quantity': 25, 'price': 130.75, 'value': 3268.75}], 'summary': {'total_value': 33318.75, 'total_securities': 3}}}}, {'metadata': {'document_type': 'balance_sheet', 'document_date': '2025-03-29T23:31:14.845057'}, 'tables': [{'type': 'balance_sheet', 'data': [{'Item': 'Cash and Cash Equivalents', 'Amount': 50000.0}, {'Item': 'Investments', 'Amount': 150000.0}, {'Item': 'Real Estate', 'Amount': 500000.0}, {'Item': 'Total Assets', 'Amount': 700000.0}, {'Item': 'Credit Card Debt', 'Amount': 5000.0}, {'Item': 'Mortgage', 'Amount': 300000.0}, {'Item': 'Total Liabilities', 'Amount': 305000.0}, {'Item': 'Net Worth', 'Amount': 395000.0}]}], 'financial_data': {'balance_sheet': {'assets': {'cash': 50000.0, 'investments': 150000.0, 'real_estate': 500000.0}, 'liabilities': {'credit_card': 5000.0, 'mortgage': 300000.0}, 'equity': {'net_worth': 395000.0}, 'summary': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'total_equity': 395000.0}}}}, {'metadata': {'document_type': 'income_statement', 'document_date': '2025-03-15T23:31:14.845057'}, 'tables': [{'type': 'income_statement', 'data': [{'Item': 'Salary', 'Amount': 120000.0}, {'Item': 'Investment Income', 'Amount': 15000.0}, {'Item': 'Total Income', 'Amount': 135000.0}, {'Item': 'Housing', 'Amount': 36000.0}, {'Item': 'Transportation', 'Amount': 12000.0}, {'Item': 'Food', 'Amount': 9600.0}, {'Item': 'Other Expenses', 'Amount': 24000.0}, {'Item': 'Total Expenses', 'Amount': 81600.0}, {'Item': 'Net Income', 'Amount': 53400.0}]}], 'financial_data': {'income_statement': {'revenues': {'salary': 120000.0, 'investment_income': 15000.0}, 'expenses': {'housing': 36000.0, 'transportation': 12000.0, 'food': 9600.0, 'other': 24000.0}, 'profits': {'net_income': 53400.0}, 'summary': {'total_income': 135000.0, 'total_expenses': 81600.0, 'net_income': 53400.0}}}}, {'metadata': {'document_type': 'salary_statement', 'document_date': '2025-04-01T23:31:14.845057'}, 'tables': [{'type': 'salary', 'data': [{'Item': 'Gross Salary', 'Amount': 10000.0}, {'Item': 'Income Tax', 'Amount': 2500.0}, {'Item': 'Social Security', 'Amount': 800.0}, {'Item': 'Health Insurance', 'Amount': 400.0}, {'Item': 'Net Salary', 'Amount': 6300.0}]}], 'financial_data': {'salary': {'gross_salary': 10000.0, 'deductions': {'income_tax': 2500.0, 'social_security': 800.0, 'health_insurance': 400.0}, 'net_salary': 6300.0}}}]}",
      "expected": "{'document_types': ['portfolio_statement', 'balance_sheet', 'income_statement', 'salary_statement']}",
      "actual": "{'merge_date': '2025-04-14T23:31:14.845057', 'original_documents': 4, 'document_types': ['portfolio_statement', 'balance_sheet', 'income_statement', 'salary_statement'], 'merged_data': {'portfolio': {'securities': [{'name': 'Apple Inc.', 'isin': 'US0378331005', 'quantity': 100, 'price': 150.25, 'value': 15025.0}, {'name': 'Microsoft Corp.', 'isin': 'US5949181045', 'quantity': 50, 'price': 300.5, 'value': 15025.0}, {'name': 'Amazon.com Inc.', 'isin': 'US0231351067', 'quantity': 25, 'price': 130.75, 'value': 3268.75}], 'summary': {'total_value': 33318.75, 'total_securities': 3}}, 'balance_sheet': {'assets': {'cash': 50000.0, 'investments': 150000.0, 'real_estate': 500000.0}, 'liabilities': {'credit_card': 5000.0, 'mortgage': 300000.0}, 'equity': {'net_worth': 395000.0}, 'summary': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'total_equity': 395000.0}}, 'income_statement': {'revenues': {'salary': 120000.0, 'investment_income': 15000.0}, 'expenses': {'housing': 36000.0, 'transportation': 12000.0, 'food': 9600.0, 'other': 24000.0}, 'profits': {'net_income': 53400.0}, 'summary': {'total_income': 135000.0, 'total_expenses': 81600.0, 'net_income': 53400.0}}, 'salary': {'salary_slips': [{'gross_salary': 0, 'net_salary': 0, 'deductions': {}, 'additions': {}, 'details': {}, 'date': '2025-04-01T23:31:14.845057'}], 'summary': {'average_gross': 0.0, 'average_net': 0.0, 'total_gross': 0, 'total_net': 0, 'period_start': '2025-04-01T23:31:14.845057', 'period_end': '2025-04-01T23:31:14.845057', 'salary_slips_count': 1, 'trends': {}}}}, 'summary': {'financial_health': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'total_equity': 395000.0}, 'asset_overview': {'total_portfolio_value': 33318.75, 'security_count': 3}, 'income_overview': {'total_revenue': 0, 'total_expenses': 81600.0, 'net_profit': 0, 'average_monthly_gross': 0.0, 'average_monthly_net': 0.0}, 'key_metrics': {'debt_to_assets': 0.4357142857142857, 'debt_to_equity': 0.7721518987341772}}}"
    },
    {
      "test_id": 3,
      "description": "Compare documents over time",
      "passed": false,
      "execution_time": 0,
      "input": "{'merged_documents': [{'merge_date': '2025-02-13T23:31:14.845057', 'document_types': ['portfolio_statement', 'balance_sheet'], 'merged_data': {'portfolio': {'securities': [{'name': 'Apple Inc.', 'isin': 'US0378331005', 'quantity': 80, 'price': 140.25, 'value': 11220.0}, {'name': 'Microsoft Corp.', 'isin': 'US5949181045', 'quantity': 40, 'price': 280.5, 'value': 11220.0}], 'summary': {'total_value': 22440.0, 'total_securities': 2}}, 'balance_sheet': {'assets': {'cash': 40000.0, 'investments': 120000.0, 'real_estate': 450000.0}, 'liabilities': {'credit_card': 6000.0, 'mortgage': 320000.0}, 'equity': {'net_worth': 284000.0}, 'summary': {'total_assets': 610000.0, 'total_liabilities': 326000.0, 'total_equity': 284000.0}}}}, {'merge_date': '2025-04-14T23:31:14.845057', 'document_types': ['portfolio_statement', 'balance_sheet'], 'merged_data': {'portfolio': {'securities': [{'name': 'Apple Inc.', 'isin': 'US0378331005', 'quantity': 100, 'price': 150.25, 'value': 15025.0}, {'name': 'Microsoft Corp.', 'isin': 'US5949181045', 'quantity': 50, 'price': 300.5, 'value': 15025.0}, {'name': 'Amazon.com Inc.', 'isin': 'US0231351067', 'quantity': 25, 'price': 130.75, 'value': 3268.75}], 'summary': {'total_value': 33318.75, 'total_securities': 3}}, 'balance_sheet': {'assets': {'cash': 50000.0, 'investments': 150000.0, 'real_estate': 500000.0}, 'liabilities': {'credit_card': 5000.0, 'mortgage': 300000.0}, 'equity': {'net_worth': 395000.0}, 'summary': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'total_equity': 395000.0}}}}]}",
      "expected": "{'period_start': True, 'period_end': True, 'trend_types': ['portfolio', 'balance_sheet']}",
      "actual": "{'error': \"'DocumentMergeAgent' object has no attribute 'compare_documents_over_time'\"}"
    },
    {
      "test_id": 4,
      "description": "Generate comprehensive report",
      "passed": true,
      "execution_time": 0.0,
      "input": "{'merged_document': {'merge_date': '2025-04-14T23:31:14.845057', 'document_types': ['portfolio_statement', 'balance_sheet', 'income_statement', 'salary_statement'], 'merged_data': {'portfolio': {'securities': [{'name': 'Apple Inc.', 'isin': 'US0378331005', 'quantity': 100, 'price': 150.25, 'value': 15025.0}, {'name': 'Microsoft Corp.', 'isin': 'US5949181045', 'quantity': 50, 'price': 300.5, 'value': 15025.0}, {'name': 'Amazon.com Inc.', 'isin': 'US0231351067', 'quantity': 25, 'price': 130.75, 'value': 3268.75}], 'summary': {'total_value': 33318.75, 'total_securities': 3}}, 'balance_sheet': {'assets': {'cash': 50000.0, 'investments': 150000.0, 'real_estate': 500000.0}, 'liabilities': {'credit_card': 5000.0, 'mortgage': 300000.0}, 'equity': {'net_worth': 395000.0}, 'summary': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'total_equity': 395000.0}}, 'income_statement': {'revenues': {'salary': 120000.0, 'investment_income': 15000.0}, 'expenses': {'housing': 36000.0, 'transportation': 12000.0, 'food': 9600.0, 'other': 24000.0}, 'profits': {'net_income': 53400.0}, 'summary': {'total_income': 135000.0, 'total_expenses': 81600.0, 'net_income': 53400.0}}, 'salary': {'salary_slips': [{'date': '2025-03-15T23:31:14.845057', 'gross_salary': 10000.0, 'deductions': {'income_tax': 2500.0, 'social_security': 800.0, 'health_insurance': 400.0}, 'net_salary': 6300.0}], 'summary': {'average_gross': 10000.0, 'average_net': 6300.0, 'total_gross': 10000.0, 'total_net': 6300.0}}}}}",
      "expected": "{'report_type': 'comprehensive_financial_report', 'data_sources': ['portfolio_statement', 'balance_sheet', 'income_statement', 'salary_statement']}",
      "actual": "{'report_date': '2025-04-14T23:31:14.845057', 'report_type': 'comprehensive_financial_report', 'data_sources': ['portfolio_statement', 'balance_sheet', 'income_statement', 'salary_statement'], 'financial_snapshot': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'net_worth': 395000.0, 'monthly_income': 10000.0, 'monthly_expenses': 6800.0, 'portfolio_value': 33318.75, 'debt_to_equity_ratio': 0.7721518987341772, 'profit_margin': 0}, 'assets_and_liabilities': {'total_assets': 700000.0, 'total_liabilities': 305000.0, 'net_worth': 395000.0, 'debt_to_equity_ratio': 0.7721518987341772, 'asset_breakdown': [{'name': 'real_estate', 'value': 500000.0, 'percentage': 71.42857142857143}, {'name': 'investments', 'value': 150000.0, 'percentage': 21.428571428571427}, {'name': 'cash', 'value': 50000.0, 'percentage': 7.142857142857142}, {'name': '\u05ea\u05d9\u05e7 \u05d4\u05e9\u05e7\u05e2\u05d5\u05ea', 'value': 33318.75, 'percentage': 4.759821428571429}], 'liability_breakdown': [{'name': 'mortgage', 'value': 300000.0, 'percentage': 98.36065573770492}, {'name': 'credit_card', 'value': 5000.0, 'percentage': 1.639344262295082}], 'recommendations': [{'title': '\u05e8\u05d9\u05db\u05d5\u05d6 \u05d2\u05d1\u05d5\u05d4 \u05e9\u05dc \u05e0\u05db\u05e1\u05d9\u05dd', 'description': 'real_estate \u05de\u05d4\u05d5\u05d5\u05d4 71.43% \u05de\u05e1\u05da \u05d4\u05e0\u05db\u05e1\u05d9\u05dd \u05e9\u05dc\u05da.', 'action': '\u05e9\u05e7\u05d5\u05dc \u05dc\u05d2\u05d5\u05d5\u05df \u05d0\u05ea \u05d4\u05e0\u05db\u05e1\u05d9\u05dd \u05e9\u05dc\u05da \u05dc\u05d4\u05e4\u05d7\u05ea\u05ea \u05e1\u05d9\u05db\u05d5\u05e0\u05d9\u05dd.', 'priority': 'medium'}]}, 'income_and_expenses': {'total_income': 120000.0, 'total_expenses': 81600.0, 'net_income': 0, 'income_breakdown': [{'name': 'salary', 'value': 120000.0, 'percentage': 0}, {'name': 'investment_income', 'value': 15000.0, 'percentage': 0}, {'name': '\u05e9\u05db\u05e8 \u05e2\u05d1\u05d5\u05d3\u05d4', 'value': 120000.0, 'percentage': 100}], 'expense_breakdown': [{'name': 'housing', 'value': 36000.0, 'percentage': 44.11764705882353}, {'name': 'other', 'value': 24000.0, 'percentage': 29.411764705882355}, {'name': 'transportation', 'value': 12000.0, 'percentage': 14.705882352941178}, {'name': 'food', 'value': 9600.0, 'percentage': 11.76470588235294}], 'monthly_cash_flow': 0.0, 'recommendations': []}, 'investments': {'total_portfolio_value': 33318.75, 'asset_allocation': [{'type': '\u05d0\u05d7\u05e8', 'value': 33318.75, 'percentage': 100.0}], 'top_performers': [{'name': 'Apple Inc.', 'isin': 'US0378331005', 'quantity': 100, 'price': 150.25, 'value': 15025.0}, {'name': 'Microsoft Corp.', 'isin': 'US5949181045', 'quantity': 50, 'price': 300.5, 'value': 15025.0}, {'name': 'Amazon.com Inc.', 'isin': 'US0231351067', 'quantity': 25, 'price': 130.75, 'value': 3268.75}], 'historical_performance': {}, 'recommendations': [{'title': '\u05ea\u05d9\u05e7 \u05dc\u05d0 \u05de\u05d0\u05d5\u05d6\u05df', 'description': '\u05d0\u05d7\u05e8 \u05de\u05d4\u05d5\u05d5\u05d4 100.00% \u05de\u05ea\u05d9\u05e7 \u05d4\u05d4\u05e9\u05e7\u05e2\u05d5\u05ea \u05e9\u05dc\u05da.', 'action': '\u05e9\u05e7\u05d5\u05dc \u05dc\u05d2\u05d5\u05d5\u05df \u05d0\u05ea \u05d4\u05ea\u05d9\u05e7 \u05e2\u05dc \u05d9\u05d3\u05d9 \u05d4\u05e9\u05e7\u05e2\u05d4 \u05d1\u05e1\u05d5\u05d2\u05d9 \u05e0\u05db\u05e1\u05d9\u05dd \u05e0\u05d5\u05e1\u05e4\u05d9\u05dd.', 'priority': 'medium'}]}, 'recommendations': [{'title': '\u05e8\u05d9\u05db\u05d5\u05d6 \u05d2\u05d1\u05d5\u05d4 \u05e9\u05dc \u05e0\u05db\u05e1\u05d9\u05dd', 'description': 'real_estate \u05de\u05d4\u05d5\u05d5\u05d4 71.43% \u05de\u05e1\u05da \u05d4\u05e0\u05db\u05e1\u05d9\u05dd \u05e9\u05dc\u05da.', 'action': '\u05e9\u05e7\u05d5\u05dc \u05dc\u05d2\u05d5\u05d5\u05df \u05d0\u05ea \u05d4\u05e0\u05db\u05e1\u05d9\u05dd \u05e9\u05dc\u05da \u05dc\u05d4\u05e4\u05d7\u05ea\u05ea \u05e1\u05d9\u05db\u05d5\u05e0\u05d9\u05dd.', 'priority': 'medium'}, {'title': '\u05ea\u05d9\u05e7 \u05dc\u05d0 \u05de\u05d0\u05d5\u05d6\u05df', 'description': '\u05d0\u05d7\u05e8 \u05de\u05d4\u05d5\u05d5\u05d4 100.00% \u05de\u05ea\u05d9\u05e7 \u05d4\u05d4\u05e9\u05e7\u05e2\u05d5\u05ea \u05e9\u05dc\u05da.', 'action': '\u05e9\u05e7\u05d5\u05dc \u05dc\u05d2\u05d5\u05d5\u05df \u05d0\u05ea \u05d4\u05ea\u05d9\u05e7 \u05e2\u05dc \u05d9\u05d3\u05d9 \u05d4\u05e9\u05e7\u05e2\u05d4 \u05d1\u05e1\u05d5\u05d2\u05d9 \u05e0\u05db\u05e1\u05d9\u05dd \u05e0\u05d5\u05e1\u05e4\u05d9\u05dd.', 'priority': 'medium'}]}"
    }
  ],
  "success_rate": 75.0
}